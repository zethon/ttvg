include(OwlPackage.cmake)

set(PROJECT_NAME "Owl")
SET(PROJECT_RUNTIME "bin")
SET(PROJECT_EXTENSION "exe")

string(TOLOWER ${PROJECT_NAME} CPACK_PACKAGE_NAME)
set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION}-@OWL_BUILD_NUMBER@-${CMAKE_SYSTEM_NAME}-${CMAKE_SYSTEM_PROCESSOR}")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Owl CPACK_PACKAGE_DESCRIPTION_SUMMARY")
set(CPACK_PACKAGE_DESCRIPTION "CPACK_PACKAGE_DESCRIPTION")
string(TOLOWER ${CPACK_PACKAGE_FILE_NAME} CPACK_PACKAGE_FILE_NAME)

set(CPACK_INSTALL_CMAKE_PROJECTS "@CMAKE_BINARY_DIR@;Owl;Owl;/")

if (NOT APPLE)
    # setting this on macOS causes the cpack error: 
    #   CPack Error: Error adding SLA.
    #   failed to find CoreServices/CoreServices.r
    # but NSIS requires this to be defined.
    set(CPACK_RESOURCE_FILE_LICENSE "@CMAKE_SOURCE_DIR@/src/CPack/license.txt")
endif()

set(CPACK_BUNDLE_NAME "${PROJECT_NAME}")
set(CPACK_BUNDLE_PLIST "@CMAKE_BINARY_DIR@/Info.plist")
set(CPACK_BUNDLE_ICON "@CMAKE_SOURCE_DIR@/src/CPack/Owl.icns")

set(CPACK_NSIS_PACKAGE_NAME "${PROJECT_NAME}")
set(CPACK_NSIS_DISPLAY_NAME "${PROJECT_NAME}")
set(CPACK_NSIS_INSTALL_ROOT "$ENV{ProgramFiles}\\${PROJECT_NAME}")

SET(CPACK_COMPONENTS_ALL Owl)
SET(CPACK_COMPONENT_GROUP_OWL_EXPANDED TRUE)
SET(CPACK_COMPONENT_OWL_DISPLAY_NAME "OWL DISPLAY")
SET(CPACK_COMPONENT_OWL_DESCRIPTION "Owl Utility")
SET(CPACK_COMPONENT_OWL_GROUP Owl)
SET(CPACK_COMPONENT_OWL_INSTALL_TYPES Full)
	
# Component deps for SDK builds are needed for Windows only
set(CPACK_COMPONENT_OWL_DEPENDS Runtime)
